#!/bin/bash
echo "=== Testing POST /api/blocks - Block 2 ==="
echo "Block hash: 0068e71fe3ccb134eb6c3288ea47c4d3d7257da6deb53a4f75d1a79c9d8c1acd"
echo ""

curl -X POST http://localhost:8372/api/blocks \
  -H "Content-Type: application/json" \
  -d '{
  "header": {
    "version": 1,
    "previous_hash": [
      0,
      206,
      216,
      23,
      159,
      119,
      133,
      183,
      89,
      57,
      42,
      94,
      149,
      39,
      123,
      234,
      180,
      232,
      146,
      250,
      148,
      217,
      184,
      132,
      155,
      24,
      245,
      156,
      94,
      121,
      2,
      60
    ],
    "timestamp": 1756581833,
    "nonce": 107,
    "merkle_root": [
      194,
      187,
      237,
      109,
      169,
      139,
      49,
      182,
      19,
      87,
      32,
      78,
      7,
      83,
      253,
      109,
      200,
      217,
      34,
      170,
      226,
      245,
      96,
      51,
      39,
      159,
      51,
      187,
      24,
      8,
      185,
      231
    ]
  },
  "transactions": [
    {
      "from": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 5000,
      "signature": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "nonce": 0
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 47,
      "signature": [
        196,
        145,
        106,
        244,
        247,
        27,
        59,
        113,
        0,
        202,
        45,
        191,
        204,
        204,
        120,
        117,
        177,
        5,
        248,
        194,
        236,
        69,
        249,
        106,
        183,
        178,
        120,
        95,
        223,
        38,
        66,
        137,
        207,
        232,
        41,
        188,
        175,
        242,
        162,
        232,
        130,
        0,
        168,
        100,
        24,
        189,
        186,
        17,
        80,
        96,
        152,
        133,
        86,
        142,
        21,
        155,
        103,
        202,
        68,
        7,
        106,
        91,
        60,
        11
      ],
      "nonce": 1
    },
    {
      "from": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 35,
      "signature": [
        200,
        175,
        236,
        124,
        154,
        147,
        177,
        65,
        10,
        87,
        115,
        119,
        245,
        151,
        202,
        192,
        76,
        217,
        150,
        4,
        125,
        59,
        32,
        184,
        173,
        94,
        215,
        129,
        218,
        221,
        80,
        222,
        212,
        36,
        142,
        116,
        255,
        81,
        76,
        147,
        51,
        177,
        110,
        200,
        216,
        68,
        173,
        198,
        114,
        103,
        228,
        78,
        110,
        141,
        226,
        201,
        57,
        94,
        241,
        176,
        106,
        169,
        189,
        8
      ],
      "nonce": 1
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 95,
      "signature": [
        116,
        74,
        244,
        20,
        83,
        218,
        48,
        191,
        204,
        37,
        72,
        104,
        244,
        158,
        231,
        75,
        160,
        184,
        167,
        17,
        37,
        76,
        32,
        211,
        96,
        189,
        156,
        217,
        102,
        56,
        33,
        89,
        120,
        5,
        159,
        45,
        245,
        147,
        87,
        185,
        30,
        74,
        95,
        74,
        151,
        116,
        180,
        19,
        247,
        214,
        241,
        12,
        120,
        120,
        2,
        117,
        52,
        206,
        204,
        179,
        222,
        19,
        10,
        6
      ],
      "nonce": 2
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 84,
      "signature": [
        14,
        4,
        127,
        139,
        26,
        200,
        139,
        200,
        118,
        93,
        222,
        61,
        251,
        204,
        231,
        213,
        21,
        16,
        54,
        95,
        16,
        193,
        199,
        49,
        52,
        74,
        7,
        252,
        119,
        139,
        19,
        240,
        9,
        137,
        107,
        254,
        90,
        124,
        109,
        175,
        25,
        201,
        154,
        242,
        80,
        89,
        74,
        170,
        236,
        174,
        4,
        93,
        97,
        89,
        117,
        219,
        92,
        5,
        150,
        77,
        127,
        170,
        190,
        13
      ],
      "nonce": 3
    }
  ]
}' \
  --max-time 2 \
  --connect-timeout 2 \
  --fail-with-body \
  | jq '.' 2>/dev/null || cat
echo -e "\n"
