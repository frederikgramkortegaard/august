#!/bin/bash
echo "=== Testing POST /api/blocks - Block 1 ==="
echo "Block hash: 00ced8179f7785b759392a5e95277beab4e892fa94d9b8849b18f59c5e79023c"
echo ""

curl -X POST http://localhost:8372/api/blocks \
  -H "Content-Type: application/json" \
  -d '{
  "header": {
    "version": 1,
    "previous_hash": [
      0,
      64,
      38,
      229,
      77,
      164,
      66,
      159,
      233,
      208,
      112,
      86,
      208,
      63,
      69,
      75,
      49,
      129,
      186,
      57,
      103,
      175,
      133,
      250,
      144,
      177,
      6,
      29,
      66,
      32,
      248,
      217
    ],
    "timestamp": 1756581233,
    "nonce": 303,
    "merkle_root": [
      106,
      211,
      113,
      52,
      97,
      237,
      2,
      40,
      7,
      79,
      241,
      143,
      228,
      236,
      139,
      174,
      222,
      168,
      8,
      43,
      219,
      68,
      181,
      213,
      104,
      165,
      58,
      31,
      211,
      39,
      132,
      187
    ]
  },
  "transactions": [
    {
      "from": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 5000,
      "signature": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "nonce": 0
    },
    {
      "from": [
        153,
        63,
        230,
        163,
        109,
        25,
        237,
        82,
        120,
        144,
        167,
        105,
        142,
        148,
        12,
        60,
        28,
        98,
        156,
        160,
        100,
        67,
        131,
        120,
        113,
        203,
        14,
        209,
        148,
        53,
        34,
        155
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 10000,
      "signature": [
        151,
        147,
        22,
        169,
        230,
        127,
        179,
        237,
        143,
        107,
        204,
        6,
        114,
        22,
        120,
        10,
        152,
        172,
        202,
        146,
        101,
        32,
        215,
        243,
        64,
        51,
        24,
        223,
        201,
        40,
        76,
        59,
        232,
        181,
        215,
        82,
        60,
        215,
        125,
        56,
        111,
        197,
        11,
        5,
        224,
        6,
        15,
        120,
        41,
        220,
        136,
        6,
        183,
        6,
        28,
        18,
        182,
        22,
        112,
        171,
        145,
        160,
        46,
        13
      ],
      "nonce": 1
    },
    {
      "from": [
        153,
        63,
        230,
        163,
        109,
        25,
        237,
        82,
        120,
        144,
        167,
        105,
        142,
        148,
        12,
        60,
        28,
        98,
        156,
        160,
        100,
        67,
        131,
        120,
        113,
        203,
        14,
        209,
        148,
        53,
        34,
        155
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 10000,
      "signature": [
        131,
        57,
        228,
        26,
        238,
        161,
        204,
        70,
        130,
        52,
        8,
        52,
        182,
        27,
        187,
        180,
        164,
        233,
        153,
        7,
        126,
        127,
        9,
        147,
        32,
        36,
        181,
        93,
        214,
        1,
        81,
        188,
        224,
        142,
        128,
        25,
        24,
        84,
        90,
        28,
        54,
        191,
        183,
        44,
        209,
        228,
        43,
        149,
        2,
        148,
        54,
        246,
        234,
        83,
        199,
        96,
        215,
        181,
        47,
        153,
        251,
        247,
        156,
        5
      ],
      "nonce": 2
    }
  ]
}' \
  --max-time 2 \
  --connect-timeout 2 \
  --fail-with-body \
  | jq '.' 2>/dev/null || cat
echo -e "\n"
