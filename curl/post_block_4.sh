#!/bin/bash
echo "=== Testing POST /api/blocks - Block 4 ==="
echo "Block hash: 000407eff22a8c35610dd65218c56d756a9ce8ec648133786924f6522e1fb3be"
echo ""

curl -X POST http://localhost:8372/api/blocks \
  -H "Content-Type: application/json" \
  -d '{
  "header": {
    "version": 1,
    "previous_hash": [
      0,
      222,
      47,
      143,
      139,
      174,
      124,
      68,
      115,
      180,
      237,
      25,
      220,
      52,
      36,
      192,
      102,
      208,
      96,
      221,
      250,
      92,
      98,
      156,
      104,
      125,
      150,
      80,
      116,
      142,
      251,
      168
    ],
    "timestamp": 1756583033,
    "nonce": 856,
    "merkle_root": [
      27,
      55,
      240,
      114,
      235,
      59,
      226,
      3,
      130,
      182,
      243,
      117,
      121,
      163,
      28,
      169,
      9,
      1,
      223,
      148,
      207,
      163,
      58,
      190,
      47,
      81,
      194,
      63,
      27,
      222,
      144,
      199
    ]
  },
  "transactions": [
    {
      "from": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 5000,
      "signature": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "nonce": 0
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 91,
      "signature": [
        28,
        27,
        82,
        206,
        149,
        172,
        118,
        141,
        170,
        193,
        80,
        182,
        6,
        211,
        199,
        24,
        140,
        179,
        2,
        62,
        75,
        204,
        4,
        102,
        154,
        104,
        34,
        91,
        192,
        67,
        228,
        252,
        75,
        54,
        118,
        126,
        175,
        143,
        76,
        141,
        103,
        78,
        207,
        168,
        246,
        5,
        79,
        108,
        33,
        163,
        228,
        6,
        244,
        45,
        191,
        105,
        62,
        83,
        185,
        104,
        57,
        162,
        80,
        4
      ],
      "nonce": 5
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 68,
      "signature": [
        153,
        237,
        252,
        202,
        195,
        125,
        119,
        241,
        228,
        167,
        152,
        119,
        51,
        18,
        73,
        35,
        107,
        98,
        219,
        213,
        68,
        213,
        187,
        206,
        104,
        47,
        220,
        186,
        82,
        137,
        108,
        77,
        73,
        5,
        220,
        199,
        179,
        0,
        97,
        124,
        155,
        87,
        3,
        161,
        198,
        38,
        69,
        75,
        226,
        194,
        52,
        200,
        118,
        36,
        55,
        255,
        8,
        151,
        46,
        107,
        12,
        33,
        41,
        0
      ],
      "nonce": 6
    },
    {
      "from": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 59,
      "signature": [
        217,
        186,
        232,
        104,
        196,
        43,
        252,
        175,
        85,
        183,
        61,
        61,
        219,
        51,
        58,
        45,
        215,
        119,
        224,
        139,
        139,
        143,
        155,
        6,
        21,
        154,
        132,
        194,
        27,
        248,
        239,
        52,
        204,
        218,
        14,
        232,
        75,
        7,
        36,
        77,
        103,
        244,
        255,
        40,
        99,
        217,
        177,
        242,
        169,
        11,
        223,
        171,
        111,
        101,
        95,
        243,
        254,
        166,
        114,
        90,
        5,
        68,
        2,
        2
      ],
      "nonce": 5
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 15,
      "signature": [
        90,
        190,
        7,
        94,
        216,
        114,
        221,
        29,
        40,
        149,
        179,
        45,
        131,
        219,
        103,
        77,
        1,
        209,
        225,
        244,
        21,
        55,
        109,
        98,
        72,
        113,
        104,
        213,
        240,
        78,
        177,
        38,
        185,
        8,
        190,
        138,
        146,
        35,
        198,
        40,
        206,
        152,
        112,
        240,
        167,
        190,
        100,
        220,
        71,
        28,
        229,
        131,
        36,
        49,
        222,
        0,
        67,
        212,
        157,
        25,
        230,
        34,
        152,
        8
      ],
      "nonce": 7
    }
  ]
}' \
  --max-time 2 \
  --connect-timeout 2 \
  --fail-with-body \
  | jq '.' 2>/dev/null || cat
echo -e "\n"
