#!/bin/bash
echo "=== Testing POST /api/blocks - Block 3 ==="
echo "Block hash: 00de2f8f8bae7c4473b4ed19dc3424c066d060ddfa5c629c687d9650748efba8"
echo ""

curl -X POST http://localhost:8372/api/blocks \
  -H "Content-Type: application/json" \
  -d '{
  "header": {
    "version": 1,
    "previous_hash": [
      0,
      104,
      231,
      31,
      227,
      204,
      177,
      52,
      235,
      108,
      50,
      136,
      234,
      71,
      196,
      211,
      215,
      37,
      125,
      166,
      222,
      181,
      58,
      79,
      117,
      209,
      167,
      156,
      157,
      140,
      26,
      205
    ],
    "timestamp": 1756582433,
    "nonce": 720,
    "merkle_root": [
      154,
      171,
      100,
      133,
      240,
      46,
      87,
      95,
      176,
      248,
      233,
      69,
      249,
      229,
      225,
      156,
      114,
      40,
      27,
      243,
      49,
      86,
      130,
      66,
      67,
      117,
      162,
      209,
      115,
      186,
      105,
      109
    ]
  },
  "transactions": [
    {
      "from": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 5000,
      "signature": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
      ],
      "nonce": 0
    },
    {
      "from": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 62,
      "signature": [
        96,
        204,
        177,
        157,
        157,
        114,
        103,
        132,
        21,
        138,
        241,
        137,
        174,
        0,
        48,
        208,
        158,
        102,
        36,
        26,
        99,
        233,
        91,
        193,
        212,
        132,
        133,
        49,
        224,
        9,
        17,
        253,
        192,
        192,
        227,
        110,
        57,
        138,
        135,
        227,
        224,
        88,
        26,
        146,
        9,
        153,
        207,
        74,
        241,
        43,
        19,
        219,
        159,
        99,
        33,
        7,
        145,
        226,
        111,
        38,
        181,
        75,
        72,
        12
      ],
      "nonce": 2
    },
    {
      "from": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 31,
      "signature": [
        160,
        126,
        40,
        19,
        26,
        33,
        39,
        85,
        6,
        234,
        137,
        217,
        83,
        168,
        233,
        130,
        253,
        155,
        90,
        26,
        113,
        209,
        23,
        104,
        255,
        132,
        88,
        14,
        59,
        175,
        216,
        70,
        2,
        101,
        157,
        116,
        183,
        33,
        196,
        37,
        73,
        92,
        132,
        51,
        239,
        46,
        42,
        92,
        206,
        29,
        30,
        170,
        29,
        127,
        168,
        212,
        38,
        160,
        240,
        180,
        71,
        100,
        194,
        2
      ],
      "nonce": 3
    },
    {
      "from": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "to": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "amount": 38,
      "signature": [
        233,
        44,
        181,
        26,
        202,
        73,
        113,
        145,
        81,
        22,
        136,
        155,
        97,
        207,
        183,
        232,
        149,
        113,
        36,
        148,
        144,
        6,
        98,
        92,
        189,
        19,
        105,
        158,
        44,
        37,
        182,
        231,
        78,
        219,
        83,
        140,
        181,
        36,
        23,
        109,
        89,
        252,
        140,
        134,
        232,
        240,
        32,
        42,
        210,
        192,
        84,
        2,
        184,
        160,
        64,
        31,
        83,
        58,
        62,
        101,
        241,
        17,
        63,
        10
      ],
      "nonce": 4
    },
    {
      "from": [
        100,
        232,
        173,
        248,
        172,
        26,
        148,
        175,
        70,
        14,
        28,
        186,
        92,
        192,
        181,
        165,
        111,
        153,
        40,
        121,
        192,
        146,
        233,
        207,
        91,
        251,
        68,
        163,
        178,
        4,
        105,
        9
      ],
      "to": [
        126,
        232,
        228,
        127,
        165,
        126,
        159,
        93,
        224,
        145,
        39,
        208,
        199,
        83,
        159,
        213,
        103,
        160,
        6,
        214,
        185,
        200,
        7,
        74,
        35,
        206,
        20,
        13,
        128,
        246,
        161,
        133
      ],
      "amount": 85,
      "signature": [
        68,
        10,
        104,
        115,
        75,
        130,
        99,
        233,
        151,
        227,
        7,
        245,
        10,
        74,
        232,
        188,
        10,
        170,
        206,
        217,
        13,
        166,
        214,
        198,
        27,
        141,
        10,
        131,
        113,
        211,
        206,
        164,
        34,
        15,
        164,
        134,
        110,
        87,
        92,
        52,
        44,
        244,
        81,
        91,
        99,
        143,
        190,
        117,
        141,
        127,
        213,
        88,
        122,
        128,
        220,
        50,
        46,
        148,
        171,
        49,
        124,
        19,
        136,
        15
      ],
      "nonce": 4
    }
  ]
}' \
  --max-time 2 \
  --connect-timeout 2 \
  --fail-with-body \
  | jq '.' 2>/dev/null || cat
echo -e "\n"
